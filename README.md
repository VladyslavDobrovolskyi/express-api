# –û–ø–∏—Å–∞–Ω–∏–µ API:
**REST API**, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ Express –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–π –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö MongoDB —Å –ø–æ–º–æ—â—å—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Mongoose, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º –≤—ã–ø–æ–ª–Ω—è—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ CRUD (create, read, update, delete) —Å –¥–∞–Ω–Ω—ã–º–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –∏—Å–ø–æ–ª—å–∑—É—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ HTTP-–∑–∞–ø—Ä–æ—Å—ã.

**tags:** `Node.js` `Express`  `Mongoose`  `Mongoose-sanitize`  `Helmet`

**features:** `–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å email` `–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –Ω–æ–º–µ—Ä–∞` `–í–∞–ª–∏–¥–∞—Ü–∏—è  Mongoose` `–í–∞–ª–∏–¥–∞—Ü–∏—è —Å –ø–æ–º–æ—â—å—é RegExp` 

--- 


### üü¢ GET `/users`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

#### –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞

`GET` `/users`

#### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç
`Status: 200 OK`
`Response:`
```
[
    {
        "_id": "60d7e29b0f2bb638d6a7a18d",
        "firstName": "John",
        "secondName": "Doe",
        "emailAddress": "johndoe@example.com",
        "phoneNumber": "+380123456789",
        "createdAt": "2022-06-27T12:00:00.000Z",
    },
    {
        "_id": "60d7e2d40f2bb638d6a7a18e",
        "firstName": "Jane",
        "secondName": "Doe",
        "emailAddress": "janedoe@example.com",
        "phoneNumber": "+380987654321",
        "createdAt": "2022-06-27T12:00:00.000Z",
    }
]
```

#### –û—à–∏–±–∫–∏

- –ï—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞, API –≤–µ—Ä–Ω–µ—Ç –æ—à–∏–±–∫—É `500 Internal Server Error`.

### üü¢ GET `/users/:id`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –µ–≥–æ id.

#### –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞

`GET` `/users/60d7e29b0f2bb638d6a7a18d`


#### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç
`Status: 200 OK`
`Response:`
```
{
    "_id": "60d7e29b0f2bb638d6a7a18d",
    "firstName": "John",
    "secondName": "Doe",
    "emailAddress": "johndoe@example.com",
    "phoneNumber": "+380123456789",
    "createdAt": "2022-06-27T12:00:00.000Z",
}
```

#### –û—à–∏–±–∫–∏

- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º id –Ω–µ –Ω–∞–π–¥–µ–Ω, API –≤–µ—Ä–Ω–µ—Ç –æ—à–∏–±–∫—É `404 Not Found`.
- –ï—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞, API –≤–µ—Ä–Ω–µ—Ç –æ—à–∏–±–∫—É `500 Internal Server Error`.

### üü£ POST `/users`

–°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

#### –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞
`POST` `/users`

`Content-Type: application/json`
```
{
    "firstName": "John",
    "secondName": "Doe",
    "emailAddress": "johndoe@example.com",
    "phoneNumber": "+380123456789"
}
```

#### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç
`Status: 201 Created`
`Response:`
```
{
    "_id": "60d7e29b0f2bb638d6a7a18d",
    "firstName": "John",
    "secondName": "Doe",
    "emailAddress": "johndoe@example.com",
    "phoneNumber": "+380123456789",
    "createdAt": "2022-06-27T12:00:00.000Z",
}
```

#### –û—à–∏–±–∫–∏

- –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é, API –≤–µ—Ä–Ω–µ—Ç –æ—à–∏–±–∫—É `400 Bad Request` —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏.
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –Ω–æ–º–µ—Ä–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏–ª–∏ email —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, API –≤–µ—Ä–Ω–µ—Ç –æ—à–∏–±–∫—É `400 Bad Request` —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ–± –æ—à–∏–±–∫–µ.
- –ï—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞, API –≤–µ—Ä–Ω–µ—Ç –æ—à–∏–±–∫—É `500 Internal Server Error`.

###  üü° PUT `/users/:id`

–†–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –µ–≥–æ id.

#### –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞

`PUT` `/users/60d7e29b0f2bb638d6a7a18d`
```
{
    "firstName": "John",
    "secondName": "Smith",
    "emailAddress": "johnsmith@example.com",
    "phoneNumber": "+380987654321"
}
```

#### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç

`Status: 200 OK` `Response:`
```
{
    "_id": "60d7e29b0f2bb638d6a7a18d",
    "firstName": "John",
    "secondName": "Smith",
    "emailAddress": "johnsmith@example.com",
    "phoneNumber": "+380987654321",
    "createdAt": "2022-06-27T12:00:00.000Z",
}
```

#### –û—à–∏–±–∫–∏

- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º id –Ω–µ –Ω–∞–π–¥–µ–Ω, API –≤–µ—Ä–Ω–µ—Ç –æ—à–∏–±–∫—É `404 Not Found`.
- –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é, API –≤–µ—Ä–Ω–µ—Ç –æ—à–∏–±–∫—É `400 Bad Request` —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏.
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –Ω–æ–º–µ—Ä–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏–ª–∏ email —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, API –≤–µ—Ä–Ω–µ—Ç –æ—à–∏–±–∫—É `400 Bad Request` —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ–± –æ—à–∏–±–∫–µ.
- –ï—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞, API –≤–µ—Ä–Ω–µ—Ç –æ—à–∏–±–∫—É `500 Internal Server Error`.

### üî¥ DELETE `/users/:id`

–£–¥–∞–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –µ–≥–æ id.

#### –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞


`DELETE` `/users/60d7e29b0f2bb638d6a7a18d`

#### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç

`Status: 200 OK`
```
{
    "message": "User deleted."
}
```

#### –û—à–∏–±–∫–∏

- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º id –Ω–µ –Ω–∞–π–¥–µ–Ω, API –≤–µ—Ä–Ω–µ—Ç –æ—à–∏–±–∫—É `404 Not Found`.
- –ï—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞, API –≤–µ—Ä–Ω–µ—Ç –æ—à–∏–±–∫—É `500 Internal Server Error`.

--- 

# üë§ –û–ø–∏—Å–∞–Ω–∏–µ —Å—Ö–µ–º—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

```
*required* firstName: {
            type: String,
            maxlength: 50,
            minlength: 2,
            trim: true,
            required: true,
            match: /^([–ê-–Ø–Å][–∞-—è—ë]{1,}|[A-Z][a-z]{1,})$/,
        },
 *required secondName: {
            type: String,
            maxlength: 50,
            minlength: 2,
            trim: true,
            required: true,
            match: /^([–ê-–Ø–Å][–∞-—è—ë]{1,}|[A-Z][a-z]{1,})$/,
        },
 *optional* emailAddress: {
            type: String,
            maxlength: 255,
            minlength: 2,
            trim: true,
            required: false,
            unique: true,
            match: /^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/,
        },
*required* phoneNumber: {
            type: String,
            maxlength: 13,
            minlength: 10,
            required: true,
            trim: true,
            match: /^\+380\d{9}$/,
        },
*generated* createdAt: {
            type: Date,
            default: Date.now,
            immutable: true,
        },
```
